# Re-create the updated index.html and fresh QR codes.
# Also produce a small .nojekyll file the user can upload if GitHub Pages shows a build "analyze" error.
from PIL import Image
import qrcode, os

site_url = "https://ttravellogisticsllc-beep.github.io/ttravel-pickup/"
sms_link_simple = "sms:+13129856760"  # widest compatibility
tel_link = "tel:+13129856760"

html = r"""<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TTravel Logistics — Schedule a Pickup</title>
<style>
  :root { --navy:#0b2341; --lime:#a7e63f; --gray:#5a626e; --light:#f5f7fa; }
  * { box-sizing: border-box; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: var(--light); color: #111; }
  header { background: white; padding: 20px 16px; border-bottom: 2px solid #eaecef; text-align: center; }
  h1 { margin: 0; color: var(--navy); font-size: 22px; }
  p.sub { margin: 6px 0 0 0; color: var(--gray); font-size: 14px; }
  .wrap { max-width: 860px; margin: 16px auto 28px; padding: 0 14px 24px; }
  .card { background: white; border-radius: 14px; padding: 18px; margin-top: 14px; box-shadow: 0 6px 22px rgba(0,0,0,.06); }
  label { display: block; font-weight: 600; margin: 12px 0 6px; }
  input, select, textarea { width: 100%; padding: 12px 10px; border: 1px solid #cfd6df; border-radius: 10px; font-size: 16px; }
  textarea { min-height: 90px; }
  .help { color: var(--gray); font-size: 13px; margin-top: 6px; }
  .split { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
  @media (max-width:700px){ .split{ grid-template-columns: 1fr; } }
  .pills { display:flex; gap:10px; flex-wrap:wrap; }
  .pill { display:inline-block; padding:10px 14px; border:1px solid #cfd6df; border-radius:999px; cursor:pointer; user-select:none; }
  .pill.active { background: var(--lime); border-color: var(--lime); }
  .cta { background: var(--navy); color: white; font-weight: 700; padding: 14px 18px; border: 0; border-radius: 12px; font-size: 18px; width: 100%; cursor: pointer; margin-top: 10px; }
  .btn { background:#0b4aa0; color:white; border:0; border-radius:10px; padding:10px 12px; font-size:14px; cursor:pointer; }
  .btn.secondary { background:#5a626e; }
  .hidden { display:none; }
  .badge { display:inline-block; background:#eef6ff; border:1px solid #d4e5ff; color:#0b4aa0; border-radius:8px; padding:6px 10px; font-size:13px; margin-top:6px; }
  .copywrap { background:#fffef2; border:1px solid #f5e5a1; border-radius:10px; padding:10px; margin-top:12px; }
  .small { font-size:13px; color:var(--gray); }
  .error { color:#b00020; font-size:13px; display:none; margin-top:6px; }
  .row-inline { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .tag { display:inline-block; padding:6px 10px; border:1px solid #cfd6df; border-radius:8px; cursor:pointer; margin-top:6px; }
  .review { background:#f9fbff; border:1px solid #dbe7ff; border-radius:12px; padding:14px; margin-top:10px; }
  .review h3 { margin:4px 0 10px; color:#0b4aa0; font-size:18px; }
  .req { color:#b00020; margin-left: 4px; }
</style>
</head>
<body>
  <header>
    <h1>Schedule a Pickup — <span class="brand">TTravel Logistics LLC</span></h1>
    <p class="sub">Same day and next day. High roof Sprinter. 143 L × 55 W × 76 H. <strong>Up to 3,200 lb</strong>.</p>
    <p class="sub"><strong>Contact</strong> 312 985 6760 • ttravellogisticsllc@gmail.com</p>
  </header>

  <div class="wrap">
    <div class="card">
      <label>Are you contacting us from a company</label>
      <div class="pills">
        <label class="pill active"><input type="radio" name="role" value="company" checked style="display:none"> Yes, I am with a company</label>
        <label class="pill"><input type="radio" name="role" value="person" style="display:none"> No, I am an individual</label>
      </div>
      <div class="help">Pick one. The form switches to the right questions. <span class="small">Fields marked with <span class="req">*</span> are required.</span></div>
    </div>

    <!-- Company form -->
    <form id="formCompany" class="card" novalidate>
      <div class="split">
        <div>
          <label>Company name <span class="req">*</span></label>
          <input id="c_company" required maxlength="120">
          <div class="error" id="e_c_company">Company name is required.</div>
        </div>
        <div>
          <label>Your name <span class="req">*</span></label>
          <input id="c_name" required pattern="[A-Za-z .'\-]+" placeholder="First Last">
          <div class="error" id="e_c_name">Letters only.</div>
        </div>
      </div>
      <div class="split">
        <div>
          <label>Phone <span class="req">*</span></label>
          <input id="c_phone" required type="tel" inputmode="tel" pattern="[\d\-\+\(\) ]{7,20}" oninput="digitsOnly(this)" placeholder="(555) 555-5555">
          <div class="error" id="e_c_phone">Valid phone required.</div>
        </div>
        <div>
          <label>Email <span class="req">*</span></label>
          <input id="c_email" type="email" required placeholder="name@company.com">
          <div class="error" id="e_c_email">Valid email required.</div>
        </div>
      </div>
      <div class="split">
        <div><label>Touchless at pickup</label><select id="c_touch_pickup"><option>No</option><option>Yes</option></select></div>
        <div><label>Touchless at delivery</label><select id="c_touch_drop"><option>No</option><option>Yes</option></select></div>
      </div>
      <div class="split">
        <div><label>Pickup dock available</label><select id="c_dock"><option>No</option><option>Yes</option></select></div>
        <div><label>Forklift or pallet jack at pickup</label><select id="c_lift"><option>None</option><option>Forklift</option><option>Pallet jack</option><option>Both</option></select></div>
      </div>

      <label>Commodity or description</label>
      <input id="c_commodity" maxlength="140">

      <div class="split">
        <div>
          <label>Pallets <span class="req">*</span></label>
          <input id="c_pallets" type="number" min="0" max="3" step="1" inputmode="numeric" placeholder="0" required>
          <div class="help">Max 3 pallets.</div>
          <div class="error" id="e_c_pallets">Max 3 pallets.</div>
        </div>
        <div>
          <label>Pieces</label>
          <input id="c_pieces" type="number" min="0" step="1" inputmode="numeric" placeholder="0">
        </div>
      </div>

      <div class="split">
        <div>
          <label>Total weight (lb) <span class="req">*</span></label>
          <input id="c_weight" type="number" min="0" max="3200" step="1" inputmode="numeric" placeholder="0" oninput="checkWeightLimit()" required>
          <div class="error" id="e_c_weight">Van limit is 3,200 lb.</div>
        </div>
        <div>
          <label>Max size (in)</label>
          <div class="split">
            <div><label>Length (L)</label><input id="c_len" type="number" min="0" step="1" inputmode="numeric" placeholder="48"></div>
            <div><label>Width (W)</label><input id="c_wid" type="number" min="0" step="1" inputmode="numeric" placeholder="40"></div>
          </div>
          <div><label>Height (H)</label><input id="c_hei" type="number" min="0" step="1" inputmode="numeric" placeholder="60"></div>
          <div class="help">Numbers only. We’ll format as L × W × H.</div>
        </div>
      </div>

      <div class="split">
        <div><label>Hazmat</label><select id="c_haz"><option>No</option><option>Yes</option></select></div>
        <div><label>Temp control needed</label><select id="c_temp"><option>No</option><option>Yes</option></select></div>
      </div>

      <div class="split">
        <div>
          <label>Pickup address <span class="req">*</span></label>
          <textarea id="c_pu_addr" required></textarea>
          <div class="row-inline"><button class="btn" type="button" onclick="verifyAddress('c_pu_addr','status_c_pu')">Verify address</button><a class="btn" target="_blank" id="map_c_pu" href="#">Open in Maps</a></div>
          <div class="help" id="status_c_pu"></div>
          <div class="error" id="e_c_pu_addr">Pickup address is required.</div>
        </div>
        <div>
          <label>Delivery address <span class="req">*</span></label>
          <textarea id="c_do_addr" required></textarea>
          <div class="row-inline"><button class="btn" type="button" onclick="verifyAddress('c_do_addr','status_c_do')">Verify address</button><a class="btn" target="_blank" id="map_c_do" href="#">Open in Maps</a></div>
          <div class="help" id="status_c_do"></div>
          <div class="error" id="e_c_do_addr">Delivery address is required.</div>
        </div>
      </div>

      <div class="split">
        <div><label>Pickup window <span class="req">*</span></label><input id="c_pu_win" required placeholder="Date and time range"><div class="error" id="e_c_pu_win">Pickup window is required.</div></div>
        <div><label>Delivery window <span class="req">*</span></label><input id="c_do_win" required placeholder="Date and time range"><div class="error" id="e_c_do_win">Delivery window is required.</div></div>
      </div>

      <div class="split">
        <div><label>Pickup contact name and phone</label><input id="c_pu_ct" placeholder="Name and phone"></div>
        <div><label>Delivery contact name and phone</label><input id="c_do_ct" placeholder="Name and phone"></div>
      </div>

      <p class="small">We use your info only to schedule your pickup.</p>

      <label>Accessorials</label>
      <div>
        <label class="pill"><input type="checkbox" value="Inside pickup" class="c_acc"> Inside pickup</label>
        <label class="pill"><input type="checkbox" value="Inside delivery" class="c_acc"> Inside delivery</label>
        <label class="pill"><input type="checkbox" value="Limited access" class="c_acc"> Limited access</label>
        <label class="pill"><input type="checkbox" value="Construction site" class="c_acc"> Construction site</label>
        <label class="pill"><input type="checkbox" value="School" class="c_acc"> School</label>
        <label class="pill"><input type="checkbox" value="Hospital" class="c_acc"> Hospital</label>
        <label class="pill"><input type="checkbox" value="Trade show" class="c_acc"> Trade show</label>
        <label class="pill"><input type="checkbox" value="After hours" class="c_acc"> After hours</label>
        <label class="pill"><input type="checkbox" value="Appointment" class="c_acc"> Appointment</label>
      </div>

      <label>PO or reference (optional)</label><input id="c_ref" maxlength="64">

      <label>Notes for driver</label><textarea id="c_notes" maxlength="400"></textarea>

      <div><label class="pill"><input id="c_det" type="checkbox"> I understand detention may apply after quick-turn wait time</label></div>

      <button type="button" class="cta" onclick="reviewCompany()">Review & Send</button>

      <!-- Company Review/Confirm -->
      <div id="reviewCompany" class="review hidden">
        <h3>Review your info</h3>
        <pre id="companyReviewLines" style="white-space:pre-wrap;"></pre>
        <div class="row-inline" style="margin-top:10px;">
          <button class="btn secondary" type="button" onclick="editCompany()">Edit</button>
          <button class="btn" type="button" onclick="sendCompany()">Confirm & Send</button>
        </div>
      </div>

      <div id="companyCopy" class="copywrap hidden">
        <p class="small">If your email app did not open, copy this and email it to <strong>ttravellogisticsllc@gmail.com</strong> or text it to <strong>312 985 6760</strong>.</p>
        <textarea id="companySummary"></textarea>
        <button type="button" class="cta" onclick="copyCompany()">Copy text</button>
      </div>
    </form>

    <!-- Individual form -->
    <form id="formPerson" class="card hidden" novalidate>
      <div class="split">
        <div><label>Your name <span class="req">*</span></label><input id="p_name" required pattern="[A-Za-z .'\-]+" placeholder="First Last"><div class="error" id="e_p_name">Letters only.</div></div>
        <div><label>Phone <span class="req">*</span></label><input id="p_phone" required type="tel" inputmode="tel" pattern="[\d\-\+\(\) ]{7,20}" oninput="digitsOnly(this)" placeholder="(555) 555-5555"><div class="error" id="e_p_phone">Valid phone required.</div></div>
      </div>
      <label>Email <span class="req">*</span></label><input id="p_email" type="email" required placeholder="name@email.com"><div class="error" id="e_p_email">Valid email required.</div>

      <div class="split">
        <div><label>Stairs at pickup</label><select id="p_stairs_pu"><option>No</option><option>Yes</option></select></div>
        <div><label>Stairs at delivery</label><select id="p_stairs_do"><option>No</option><option>Yes</option></select></div>
      </div>
      <div class="split">
        <div><label>Elevator at pickup</label><select id="p_elev_pu"><option>None</option><option>Passenger elevator</option><option>Freight elevator</option><option>Service elevator</option></select></div>
        <div><label>Elevator at delivery</label><select id="p_elev_do"><option>None</option><option>Passenger elevator</option><option>Freight elevator</option><option>Service elevator</option></select></div>
      </div>
      <div class="split">
        <div><label>Help at pickup</label><select id="p_help_pu"><option>No</option><option>Yes</option></select></div>
        <div><label>Help at delivery</label><select id="p_help_do"><option>No</option><option>Yes</option></select></div>
      </div>

      <label>What are we moving</label><textarea id="p_items" placeholder="Describe items, count, largest size and weight"></textarea>

      <div class="split">
        <div>
          <label>Pickup address <span class="req">*</span></label>
          <textarea id="p_pu_addr" required placeholder="Street, City, State, ZIP"></textarea>
          <div class="row-inline"><button class="btn" type="button" onclick="verifyAddress('p_pu_addr','status_p_pu')">Verify address</button><a class="btn" target="_blank" id="map_p_pu" href="#">Open in Maps</a></div>
          <div class="help" id="status_p_pu"></div>
          <div class="error" id="e_p_pu_addr">Pickup address is required.</div>
        </div>
        <div>
          <label>Delivery address <span class="req">*</span></label>
          <textarea id="p_do_addr" required placeholder="Street, City, State, ZIP"></textarea>
          <div class="row-inline"><button class="btn" type="button" onclick="verifyAddress('p_do_addr','status_p_do')">Verify address</button><a class="btn" target="_blank" id="map_p_do" href="#">Open in Maps</a></div>
          <div class="help" id="status_p_do"></div>
          <div class="error" id="e_p_do_addr">Delivery address is required.</div>
        </div>
      </div>

      <div class="split">
        <div>
          <label>Pickup date <span class="req">*</span></label>
          <input id="p_pu_date" type="date" required>
          <label>Pickup time window (CT) <span class="req">*</span></label>
          <select id="p_pu_win_choice" required onchange="toggleCustom('p_pu_win_choice','p_pu_custom')">
            <option value="">Select a window</option>
            <option>ASAP</option>
            <option>8–10 AM</option>
            <option>10 AM–12 PM</option>
            <option>12–2 PM</option>
            <option>2–4 PM</option>
            <option>4–6 PM</option>
            <option>6–8 PM</option>
            <option>After hours</option>
            <option>Weekend (any)</option>
            <option>Sat morning (9 AM–12 PM)</option>
            <option>Sat afternoon (12–4 PM)</option>
            <option>Sat evening (4–8 PM)</option>
            <option>Sun morning (9 AM–12 PM)</option>
            <option>Sun afternoon (12–4 PM)</option>
            <option>Sun evening (4–8 PM)</option>
            <option value="custom">Custom window</option>
          </select>
          <div id="p_pu_custom" class="hidden">
            <div class="split">
              <div><label>Custom start</label><input type="time" id="p_pu_custom_start"></div>
              <div><label>Custom end</label><input type="time" id="p_pu_custom_end"></div>
            </div>
          </div>
          <div class="error" id="e_p_pu_win">Choose a pickup window or fill custom times.</div>
        </div>

        <div>
          <label>Delivery date <span class="req">*</span></label>
          <input id="p_do_date" type="date" required>
          <label>Delivery time window (CT) <span class="req">*</span></label>
          <select id="p_do_win_choice" required onchange="toggleCustom('p_do_win_choice','p_do_custom')">
            <option value="">Select a window</option>
            <option>ASAP</option>
            <option>8–10 AM</option>
            <option>10 AM–12 PM</option>
            <option>12–2 PM</option>
            <option>2–4 PM</option>
            <option>4–6 PM</option>
            <option>6–8 PM</option>
            <option>After hours</option>
            <option>Weekend (any)</option>
            <option>Sat morning (9 AM–12 PM)</option>
            <option>Sat afternoon (12–4 PM)</option>
            <option>Sat evening (4–8 PM)</option>
            <option>Sun morning (9 AM–12 PM)</option>
            <option>Sun afternoon (12–4 PM)</option>
            <option>Sun evening (4–8 PM)</option>
            <option value="custom">Custom window</option>
          </select>
          <div id="p_do_custom" class="hidden">
            <div class="split">
              <div><label>Custom start</label><input type="time" id="p_do_custom_start"></div>
              <div><label>Custom end</label><input type="time" id="p_do_custom_end"></div>
            </div>
          </div>
          <div class="error" id="e_p_do_win">Choose a delivery window or fill custom times.</div>
        </div>
      </div>

      <label>Payment method</label>
      <select id="p_pay"><option>Card</option><option>Zelle</option><option>ACH</option><option>Cash on delivery</option></select>

      <label>Notes for driver</label>
      <textarea id="p_notes" maxlength="400"></textarea>

      <p class="small">We use your info only to schedule your pickup.</p>

      <button type="button" class="cta" onclick="reviewPerson()">Review & Send</button>

      <!-- Person Review/Confirm -->
      <div id="reviewPerson" class="review hidden">
        <h3>Review your info</h3>
        <pre id="personReviewLines" style="white-space:pre-wrap;"></pre>
        <div class="row-inline" style="margin-top:10px;">
          <button class="btn secondary" type="button" onclick="editPerson()">Edit</button>
          <button class="btn" type="button" onclick="sendPerson()">Confirm & Send</button>
        </div>
      </div>

      <div id="personCopy" class="copywrap hidden">
        <p class="small">If your email app did not open, copy this and email it to <strong>ttravellogisticsllc@gmail.com</strong> or text it to <strong>312 985 6760</strong>.</p>
        <textarea id="personSummary"></textarea>
        <button type="button" class="cta" onclick="copyPerson()">Copy text</button>
      </div>
    </form>

    <div class="card">
      <div class="badge">What happens next</div>
      <p class="small">You will get a reply confirming price and pickup window. If this is urgent, call or text now.</p>
      <button class="btn" type="button" onclick="window.location.href='tel:+13129856760'">Call now</button>
      <button class="btn" type="button" onclick="window.location.href='sms:+13129856760'">Text now</button>
    </div>

    <div class="card">
      <div class="badge">About</div>
      <p class="small">TTravel Logistics LLC. Green Bay Wisconsin. Same day and next day across the Midwest. High roof Sprinter 143 L × 55 W × 76 H up to 3,200 lb. One million auto liability and 100k cargo. MC 1741039. DOT 4426346. W9 and COI available on request.</p>
    </div>
  </div>

<script>
  // Reliable tab switch
  const pillLabels = document.querySelectorAll('.pills .pill');
  const radios = document.querySelectorAll('input[name=role]');
  const companyForm = document.getElementById('formCompany');
  const personForm = document.getElementById('formPerson');
  function updateRoleUI() {
    const role = document.querySelector('input[name=role]:checked').value;
    pillLabels.forEach(l => l.classList.remove('active'));
    document.querySelector(`.pills .pill input[value=${role}]`).parentElement.classList.add('active');
    if (role === 'company') { companyForm.classList.remove('hidden'); personForm.classList.add('hidden'); }
    else { personForm.classList.remove('hidden'); companyForm.classList.add('hidden'); }
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
  radios.forEach(r => r.addEventListener('change', updateRoleUI));
  updateRoleUI();

  // Strip letters from phone as you type
  function digitsOnly(inp){ inp.value = inp.value.replace(/[^0-9+\-() ]/g, ''); }

  // Toggle custom time rows
  function toggleCustom(selectId, rowId){
    const sel = document.getElementById(selectId);
    const row = document.getElementById(rowId);
    row.classList.toggle('hidden', sel.value !== 'custom');
  }

  // 12-hour AM/PM formatting for custom times
  function fmt12(t){
    if(!t) return "";
    const [h,m] = t.split(':').map(Number);
    const am = h < 12 || h === 24;
    const h12 = ((h + 11) % 12) + 1;
    const mm = String(m).padStart(2,'0');
    return `${h12}:${mm} ${am ? 'AM' : 'PM'}`;
  }

  // Geocode using OpenStreetMap Nominatim (USA)
  async function verifyAddress(inputId, statusId){
    const raw = document.getElementById(inputId).value.trim();
    const status = document.getElementById(statusId);
    if(!raw){ status.textContent = "Please type an address first."; return; }
    status.textContent = "Checking address...";
    try{
      const url = `https://nominatim.openstreetmap.org/search?format=json&countrycodes=us&limit=3&q=${encodeURIComponent(raw)}`;
      const res = await fetch(url, {headers: {"Accept-Language":"en-US"}});
      const data = await res.json();
      if(!data || data.length===0){ status.textContent = "No matches found. Please check spelling."; return; }
      const top = data[0];
      status.innerHTML = "Closest match: <strong>"+ top.display_name + "</strong><br>GPS: " + Number(top.lat).toFixed(6) + ", " + Number(top.lon).toFixed(6);
      const mapBtnId = inputId.includes("_pu_") ? (inputId.startsWith("p_")? "map_p_pu":"map_c_pu") : (inputId.startsWith("p_")? "map_p_do":"map_c_do");
      const mapBtn = document.getElementById(mapBtnId);
      if(mapBtn){ mapBtn.href = `https://maps.google.com/?q=${encodeURIComponent(top.lat+","+top.lon)}`; }
      if(data.length>1){
        const alts = data.slice(1).map(x => `<span class="tag" onclick="fillAddress('${inputId}','${(x.display_name).replace(/'/g, "\\'")}','${x.lat}','${x.lon}','${statusId}')">${x.display_name}</span>`).join(' ');
        status.innerHTML += "<div style='margin-top:6px'>Other matches: "+alts+"</div>";
      }
    }catch(e){ status.textContent = "Address check failed. You can still submit."; }
  }
  function fillAddress(inputId, disp, lat, lon, statusId){
    document.getElementById(inputId).value = disp;
    const status = document.getElementById(statusId);
    status.innerHTML = "Selected: <strong>"+disp+"</strong><br>GPS: " + Number(lat).toFixed(6) + ", " + Number(lon).toFixed(6);
  }

  function mailto(to, subject, body) {
    const a = document.createElement('a');
    a.href = `mailto:${to}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    a.click();
  }

  // Validation helpers
  function showError(id, show){ const el=document.getElementById(id); if(el) el.style.display = show?'block':'none'; }
  function requireField(inputId, errId){ const el=document.getElementById(inputId); const ok=el.checkValidity(); showError(errId, !ok); return ok; }
  function windowText(choiceId, customStartId, customEndId){
    const choice = document.getElementById(choiceId).value;
    if(choice && choice!=='custom') return choice;
    const s = document.getElementById(customStartId).value;
    const e = document.getElementById(customEndId).value;
    if(s && e) return fmt12(s) + "–" + fmt12(e);
    return "";
  }
  function validateWindow(choiceId, startId, endId, errId){
    const choice = document.getElementById(choiceId).value;
    const start = document.getElementById(startId).value;
    const end = document.getElementById(endId).value;
    const ok = (choice && choice!=='custom') || (choice==='custom' && start && end);
    showError(errId, !ok);
    return ok;
  }

  // extra: friendly weight limit message
  function checkWeightLimit(){
    const w = parseFloat(document.getElementById('c_weight').value || '0');
    showError('e_c_weight', w > 3200);
  }

  // Build text summaries
  function buildCompanySummary(){
    const acc = Array.from(document.querySelectorAll('.card input[type=checkbox]:checked')).map(x=>x.value);
    const dims = [document.getElementById('c_len').value, document.getElementById('c_wid').value, document.getElementById('c_hei').value].filter(Boolean).join(" × ");
    return [
      "Pickup request — COMPANY",
      "",
      "Company: " + document.getElementById('c_company').value,
      "Contact: " + document.getElementById('c_name').value,
      "Phone: " + document.getElementById('c_phone').value,
      "Email: " + document.getElementById('c_email').value,
      "",
      "Touchless at pickup: " + document.getElementById('c_touch_pickup').value,
      "Touchless at delivery: " + document.getElementById('c_touch_drop').value,
      "Pickup dock available: " + document.getElementById('c_dock').value,
      "Forklift or pallet jack at pickup: " + document.getElementById('c_lift').value,
      "",
      "Commodity: " + document.getElementById('c_commodity').value,
      "Pallets: " + document.getElementById('c_pallets').value,
      "Pieces: " + document.getElementById('c_pieces').value,
      "Total weight (lb): " + document.getElementById('c_weight').value,
      "Max size (in): " + dims,
      "",
      "Hazmat: " + document.getElementById('c_haz').value,
      "Temp control: " + document.getElementById('c_temp').value,
      "",
      "Pickup address: " + document.getElementById('c_pu_addr').value,
      "Pickup window: " + document.getElementById('c_pu_win').value,
      "Pickup contact: " + document.getElementById('c_pu_ct').value,
      "",
      "Delivery address: " + document.getElementById('c_do_addr').value,
      "Delivery window: " + document.getElementById('c_do_win').value,
      "Delivery contact: " + document.getElementById('c_do_ct').value,
      "",
      "Accessorials: " + acc.join(", "),
      "PO or reference: " + document.getElementById('c_ref').value,
      "Notes: " + document.getElementById('c_notes').value,
      "",
      "Detention acknowledgement: " + (document.getElementById('c_det').checked ? "Yes" : "No")
    ].join("\n");
  }
  function buildPersonSummary(){
    const puWin = windowText('p_pu_win_choice','p_pu_custom_start','p_pu_custom_end');
    const doWin = windowText('p_do_win_choice','p_do_custom_start','p_do_custom_end');
    return [
      "Pickup request — INDIVIDUAL",
      "",
      "Name: " + document.getElementById('p_name').value,
      "Phone: " + document.getElementById('p_phone').value,
      "Email: " + document.getElementById('p_email').value,
      "",
      "Stairs at pickup: " + document.getElementById('p_stairs_pu').value,
      "Stairs at delivery: " + document.getElementById('p_stairs_do').value,
      "Elevator at pickup: " + document.getElementById('p_elev_pu').value,
      "Elevator at delivery: " + document.getElementById('p_elev_do').value,
      "Help at pickup: " + document.getElementById('p_help_pu').value,
      "Help at delivery: " + document.getElementById('p_help_do').value,
      "",
      "Items: " + document.getElementById('p_items').value,
      "",
      "Pickup address: " + document.getElementById('p_pu_addr').value,
      "Pickup date: " + document.getElementById('p_pu_date').value + " (CT)",
      "Pickup window: " + puWin,
      "",
      "Delivery address: " + document.getElementById('p_do_addr').value,
      "Delivery date: " + document.getElementById('p_do_date').value + " (CT)",
      "Delivery window: " + doWin,
      "",
      "Payment method: " + document.getElementById('p_pay').value,
      "Notes: " + document.getElementById('p_notes').value
    ].join("\n");
  }

  // Review/Confirm flows
  function reviewCompany(){
    const ok = [
      requireField('c_company','e_c_company'),
      requireField('c_name','e_c_name'),
      requireField('c_phone','e_c_phone'),
      requireField('c_email','e_c_email'),
      requireField('c_pu_addr','e_c_pu_addr'),
      requireField('c_do_addr','e_c_do_addr'),
      requireField('c_pu_win','e_c_pu_win'),
      requireField('c_do_win','e_c_do_win')
    ].every(Boolean);
    if(!ok){ window.scrollTo({top:0,behavior:'smooth'}); return; }
    const text = buildCompanySummary();
    document.getElementById('companyReviewLines').innerText = text;
    document.getElementById('reviewCompany').classList.remove('hidden');
    window.scrollTo({top: document.getElementById('reviewCompany').offsetTop - 10, behavior:'smooth'});
  }
  function editCompany(){ document.getElementById('reviewCompany').classList.add('hidden'); window.scrollTo({top:0,behavior:'smooth'}); }
  function sendCompany(){
    const summary = buildCompanySummary();
    document.getElementById('companySummary').value = summary;
    document.getElementById('companyCopy').classList.remove('hidden');
    mailto('ttravellogisticsllc@gmail.com','Pickup request — COMPANY',summary);
    window.scrollTo({top: document.getElementById('companyCopy').offsetTop - 10, behavior:'smooth'});
  }

  function reviewPerson(){
    const ok = [
      requireField('p_name','e_p_name'),
      requireField('p_phone','e_p_phone'),
      requireField('p_email','e_p_email'),
      requireField('p_pu_addr','e_p_pu_addr'),
      requireField('p_do_addr','e_p_do_addr'),
      requireField('p_pu_date','e_p_pu_date'),
      requireField('p_do_date','e_p_do_date'),
      validateWindow('p_pu_win_choice','p_pu_custom_start','p_pu_custom_end','e_p_pu_win'),
      validateWindow('p_do_win_choice','p_do_custom_start','p_do_custom_end','e_p_do_win')
    ].every(Boolean);
    if(!ok){ window.scrollTo({top:0,behavior:'smooth'}); return; }
    const text = buildPersonSummary();
    document.getElementById('personReviewLines').innerText = text;
    document.getElementById('reviewPerson').classList.remove('hidden');
    window.scrollTo({top: document.getElementById('reviewPerson').offsetTop - 10, behavior:'smooth'});
  }
  function editPerson(){ document.getElementById('reviewPerson').classList.add('hidden'); window.scrollTo({top:0,behavior:'smooth'}); }
  function sendPerson(){
    const summary = buildPersonSummary();
    document.getElementById('personSummary').value = summary;
    document.getElementById('personCopy').classList.remove('hidden');
    mailto('ttravellogisticsllc@gmail.com','Pickup request — INDIVIDUAL',summary);
    window.scrollTo({top: document.getElementById('personCopy').offsetTop - 10, behavior:'smooth'});
  }
</script>
</body>
</html>
"""

# Save files
out_html = "/mnt/data/index.html"
with open(out_html, "w", encoding="utf-8") as f:
    f.write(html)

# Create QR codes
def make_qr(data, path):
    qr = qrcode.QRCode(error_correction=qrcode.constants.ERROR_CORRECT_Q, box_size=10, border=2)
    qr.add_data(data)
    qr.make(fit=True)
    img = qr.make_image(fill_color="black", back_color="white").convert("RGB")
    img.save(path)

qr_pickup = "/mnt/data/QR_TTravel_SchedulePickup.png"
qr_sms = "/mnt/data/QR_TTravel_TextYou.png"
qr_call = "/mnt/data/QR_TTravel_CallYou.png"
make_qr(site_url, qr_pickup)
make_qr(sms_link_simple, qr_sms)
make_qr(tel_link, qr_call)

# .nojekyll file (empty)
noj_path = "/mnt/data/.nojekyll"
with open(noj_path, "w") as f:
    f.write("")

(out_html, qr_pickup, qr_sms, qr_call, noj_path)












